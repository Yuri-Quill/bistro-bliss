{"version":3,"file":"MenuPage-BdIErTyy.js","sources":["../../src/Components/MenuItemCard/MenuItemCard.tsx","../../src/Components/MenuDropdown/MenuDropdown.tsx","../../src/pages/MenuPage/MenuPage.tsx"],"sourcesContent":["import { Link } from \"react-router-dom\";\r\nimport \"./MenuItemCard.scss\";\r\nimport { IMenuItemInterface } from \"../../shared/interfaces/menu.interface\";\r\nimport NoImage from \"../../assets/no-img.jpg\";\r\ninterface IMenuItemCardProps {\r\n\tdata: IMenuItemInterface;\r\n\tcategories: string | null;\r\n}\r\n\r\nconst MenuItemCard = ({ data, categories }: IMenuItemCardProps) => {\r\n\treturn (\r\n\t\t<Link className=\"menu-card\" to={`/menu/${categories}/${data._id}`}>\r\n\t\t\t<figure className=\"menu-card__figure\">\r\n\t\t\t\t<img\r\n\t\t\t\t\tclassName=\"menu-card__image\"\r\n\t\t\t\t\tsrc={data.picture}\r\n\t\t\t\t\tonError={({ currentTarget }) => {\r\n\t\t\t\t\t\tcurrentTarget.onerror = null;\r\n\t\t\t\t\t\tcurrentTarget.src = NoImage;\r\n\t\t\t\t\t}}\r\n\t\t\t\t\talt={`Picture of ${data.name}`}\r\n\t\t\t\t\twidth={306}\r\n\t\t\t\t\theight={230}\r\n\t\t\t\t\tloading=\"lazy\"\r\n\t\t\t\t/>\r\n\t\t\t\t<figcaption className=\"menu-card__caption\">\r\n\t\t\t\t\t<span className=\"menu-card__price\">{`$ ${data.price}`}</span>\r\n\t\t\t\t\t<h3 className=\"menu-card__title\">{data.name}</h3>\r\n\t\t\t\t\t<p className=\"menu-card__ingredients\">{data.ingredients.join(\", \")}</p>\r\n\t\t\t\t</figcaption>\r\n\t\t\t</figure>\r\n\t\t</Link>\r\n\t);\r\n};\r\nexport default MenuItemCard;\r\n","import { useNavigate } from \"react-router-dom\";\r\nimport \"./MenuDropdown.scss\";\r\nimport { IMenuItemInterface } from \"../../shared/interfaces/menu.interface\";\r\ninterface IMenuCategory {\r\n\tcategory: string;\r\n\titems: IMenuItemInterface[];\r\n}\r\n\r\ninterface MenuDropdownProps {\r\n\tcategories: IMenuCategory[];\r\n\tcurrentCategory: string | null;\r\n\tcurrentPage: number;\r\n}\r\n\r\nconst MenuDropdown = ({\r\n\tcategories,\r\n\tcurrentCategory,\r\n\tcurrentPage,\r\n}: MenuDropdownProps) => {\r\n\tconst navigate = useNavigate();\r\n\r\n\tconst handleChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n\t\tnavigate(e.target.value);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<select\r\n\t\t\tclassName=\"menu-dropdown\"\r\n\t\t\tonChange={handleChange}\r\n\t\t\tvalue={\r\n\t\t\t\tcurrentCategory\r\n\t\t\t\t\t? `/menu?category=${currentCategory}&page=${currentPage}`\r\n\t\t\t\t\t: `/menu?page=${currentPage}`\r\n\t\t\t}\r\n\t\t\taria-label=\"Select menu category\"\r\n\t\t>\r\n\t\t\t<option\r\n\t\t\t\tclassName=\"menu-dropdown__option\"\r\n\t\t\t\tvalue={`/menu?page=${currentPage}`}\r\n\t\t\t>\r\n\t\t\t\tAll\r\n\t\t\t</option>\r\n\t\t\t{categories.map((cat) => (\r\n\t\t\t\t<option\r\n\t\t\t\t\tkey={cat.category}\r\n\t\t\t\t\tclassName=\"menu-dropdown__option\"\r\n\t\t\t\t\tvalue={`/menu?category=${cat.category}&page=${currentPage}`}\r\n\t\t\t\t>\r\n\t\t\t\t\t{cat.category.charAt(0).toUpperCase() + cat.category.slice(1)}\r\n\t\t\t\t</option>\r\n\t\t\t))}\r\n\t\t</select>\r\n\t);\r\n};\r\n\r\nexport default MenuDropdown;\r\n","import { getMenu } from \"../../app/slices/menuSlice\";\r\nimport { useAppDispatch, useAppSelector } from \"../../app/hooks\";\r\nimport { useEffect } from \"react\";\r\nimport { useSearchParams, NavLink } from \"react-router-dom\";\r\n\r\nimport Container from \"../../Components/Container/Container\";\r\nimport Loading from \"../../Components/Loading/Loading\";\r\nimport MenuItemCard from \"../../Components/MenuItemCard/MenuItemCard\";\r\nimport MenuDropdown from \"../../Components/MenuDropdown/MenuDropdown\";\r\nimport { FaChevronLeft, FaChevronRight } from \"react-icons/fa\";\r\n\r\nimport { IMenuItemInterface } from \"../../shared/interfaces/menu.interface\";\r\n\r\nimport \"./MenuPage.scss\";\r\n\r\nconst MenuPage = () => {\r\n\tconst dispatch = useAppDispatch();\r\n\r\n\tconst { categories, loading, error } = useAppSelector((state) => state.menu);\r\n\r\n\tconst [searchParams, setSearchParams] = useSearchParams();\r\n\tconst currentCategory = searchParams.get(\"category\") || null;\r\n\tconst pageFromUrl = searchParams.get(\"page\") || \"1\"; // По умолчанию 1\r\n\tconst itemsPerPage = 8;\r\n\r\n\t// Парсим текущую страницу из URL\r\n\tconst currentPage = Math.max(1, parseInt(pageFromUrl, 10) || 1);\r\n\r\n\t// Загрузка данных\r\n\tuseEffect(() => {\r\n\t\tif (categories.length === 0 && !loading) {\r\n\t\t\tdispatch(getMenu());\r\n\t\t}\r\n\t}, [dispatch, categories, loading]);\r\n\r\n\t// Получение элементов для отображения\r\n\tconst getMenuItems = (): IMenuItemInterface[] => {\r\n\t\tif (!categories.length) return [];\r\n\t\tif (currentCategory) {\r\n\t\t\tconst category = categories.find((cat) => cat.category === currentCategory);\r\n\t\t\treturn category ? category.items : [];\r\n\t\t}\r\n\t\treturn categories.flatMap((cat) => cat.items);\r\n\t};\r\n\r\n\tconst menuItems = getMenuItems();\r\n\r\n\t// Пагинация\r\n\tconst getPaginatedItems = () => {\r\n\t\tconst totalItems = menuItems.length;\r\n\t\tconst totalPages = Math.ceil(totalItems / itemsPerPage);\r\n\t\t// Ограничиваем currentPage максимальным количеством страниц\r\n\t\tconst safePage = Math.min(Math.max(1, currentPage), totalPages || 1);\r\n\t\tconst startIndex = (safePage - 1) * itemsPerPage;\r\n\t\tconst paginatedItems = menuItems.slice(startIndex, startIndex + itemsPerPage);\r\n\t\treturn { paginatedItems, totalPages };\r\n\t};\r\n\r\n\tconst { paginatedItems, totalPages } = getPaginatedItems();\r\n\r\n\t// Обработчики переключения страниц\r\n\tconst handlePageChange = (newPage: number) => {\r\n\t\tconst params = new URLSearchParams(searchParams);\r\n\t\tparams.set(\"page\", newPage.toString());\r\n\t\tif (currentCategory) {\r\n\t\t\tparams.set(\"category\", currentCategory);\r\n\t\t}\r\n\t\tsetSearchParams(params, { replace: true });\r\n\t};\r\n\r\n\tconst handlePrevPage = () => {\r\n\t\thandlePageChange(Math.max(currentPage - 1, 1));\r\n\t};\r\n\r\n\tconst handleNextPage = () => {\r\n\t\thandlePageChange(Math.min(currentPage + 1, totalPages));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<section className=\"menu\">\r\n\t\t\t<Container>\r\n\t\t\t\t<h2 className=\"menu__title\">Our Menu</h2>\r\n\t\t\t\t<p className=\"menu__text\">\r\n\t\t\t\t\tOur menu is designed to give you the flexibility to create a truly\r\n\t\t\t\t\tpersonalized dining experience. With a wide range of dishes to choose from,\r\n\t\t\t\t\tyou're sure to find something that suits your taste.\r\n\t\t\t\t</p>\r\n\t\t\t\t{loading ? (\r\n\t\t\t\t\t<Loading />\r\n\t\t\t\t) : error ? (\r\n\t\t\t\t\t<p className=\"menu__error\">Error: {error}</p>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<nav className=\"menu__nav\">\r\n\t\t\t\t\t\t\t<ul className=\"menu__nav-list\">\r\n\t\t\t\t\t\t\t\t<li className=\"menu__nav-list-item\">\r\n\t\t\t\t\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\t\t\t\t\tclassName={({ isActive }) =>\r\n\t\t\t\t\t\t\t\t\t\t\t`menu__nav-list-link ${\r\n\t\t\t\t\t\t\t\t\t\t\t\tisActive && currentCategory === null\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"menu__nav-list-link--active\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\"\r\n\t\t\t\t\t\t\t\t\t\t\t}`\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tto=\"/menu?page=1\"\r\n\t\t\t\t\t\t\t\t\t\tend\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\tAll\r\n\t\t\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t{categories.map((cat) => (\r\n\t\t\t\t\t\t\t\t\t<li className=\"menu__nav-list-item\" key={cat.category}>\r\n\t\t\t\t\t\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={({ isActive }) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t`menu__nav-list-link ${\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tisActive && cat.category === currentCategory\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"menu__nav-list-link--active\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t}`\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tto={`/menu?category=${cat.category}&page=1`}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{cat.category.charAt(0).toUpperCase() + cat.category.slice(1)}\r\n\t\t\t\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t<MenuDropdown\r\n\t\t\t\t\t\t\t\tcategories={categories}\r\n\t\t\t\t\t\t\t\tcurrentCategory={currentCategory}\r\n\t\t\t\t\t\t\t\tcurrentPage={currentPage}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</nav>\r\n\r\n\t\t\t\t\t\t<ul className=\"menu__items-list\">\r\n\t\t\t\t\t\t\t{paginatedItems.length > 0 ? (\r\n\t\t\t\t\t\t\t\tpaginatedItems.map((item: IMenuItemInterface) => (\r\n\t\t\t\t\t\t\t\t\t<li key={item._id} className=\"menu__item\">\r\n\t\t\t\t\t\t\t\t\t\t<MenuItemCard data={item} categories={currentCategory || \"all\"} />\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<p>No items available</p>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</ul>\r\n\r\n\t\t\t\t\t\t{totalPages > 1 && (\r\n\t\t\t\t\t\t\t<div className=\"menu__pagination\">\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"menu__pagination-button\"\r\n\t\t\t\t\t\t\t\t\tonClick={handlePrevPage}\r\n\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\tdisabled={currentPage === 1}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<FaChevronLeft />\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<span className=\"menu__pagination-info\">\r\n\t\t\t\t\t\t\t\t\tPage {currentPage} of {totalPages}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"menu__pagination-button\"\r\n\t\t\t\t\t\t\t\t\tonClick={handleNextPage}\r\n\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\tdisabled={currentPage === totalPages}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<FaChevronRight />\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</Container>\r\n\t\t</section>\r\n\t);\r\n};\r\n\r\nexport default MenuPage;\r\n"],"names":["MenuItemCard","data","categories","jsx","Link","jsxs","currentTarget","NoImage","MenuDropdown","currentCategory","currentPage","navigate","useNavigate","handleChange","e","cat","MenuPage","dispatch","useAppDispatch","loading","error","useAppSelector","state","searchParams","setSearchParams","useSearchParams","pageFromUrl","itemsPerPage","useEffect","getMenu","menuItems","category","getPaginatedItems","totalItems","totalPages","startIndex","paginatedItems","handlePageChange","newPage","params","handlePrevPage","handleNextPage","Container","Loading","Fragment","NavLink","isActive","item","FaChevronLeft","FaChevronRight"],"mappings":"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"}